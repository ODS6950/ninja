<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ODS Support Agent Installer</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background-color: #f9f9f9; }
    .logo { max-width: 200px; margin-bottom: 20px; }
    h1 { font-size: 24px; color: #333; }
    p { font-size: 16px; margin-bottom: 30px; color: #555; }
    .button {
      display: inline-block;
      padding: 15px 30px;
      font-size: 18px;
      color: white;
      background-color: #0078D7;
      border-radius: 8px;
      text-decoration: none;
      margin: 10px;
    }
    .button:hover { background-color: #005ea0; }
  </style>

  <script>
    // PIN gate using SHA-256 so the PIN isn't in source. For demo deterrence only.
    async function sha256(message) {
      const msgBuffer = new TextEncoder().encode(message);
      const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
    }

    (async function () {
      // SHA-256("69505801") = 43ac21f9101ff1fc9c43dd72cf1a631c6898d0f0b5568ae21bdfdce0601affe8
      const correctHash = "43ac21f9101ff1fc9c43dd72cf1a631c6898d0f0b5568ae21bdfdce0601affe8";
      let ok = false, tries = 0, maxTries = 3;

      while (!ok && tries < maxTries) {
        const pass = prompt("Enter your ODS install PIN:");
        if (pass === null) break; // user cancelled
        if (await sha256(pass) === correctHash) { ok = true; break; }
        tries++;
      }

      if (!ok) {
        document.documentElement.innerHTML =
          "<head><title>Access denied</title></head>" +
          "<body style='font-family:Arial;text-align:center;padding:60px;'>" +
          "<h2>Access denied</h2><p>Installer portal is restricted. Contact ODS IT Support.</p>" +
          "</body>";
      }
    })();
  </script>
</head>
<body>
  <img src="SERV Profile Logo.png" alt="ODS Logo" class="logo">
  <h1>Install the ODS Support Agent</h1>
  <p>Select your location below to download the installer:</p>

  <a class="button" href="https://dl.ninjarmm.com/agent/kansas_installer.exe">Kansas</a>
  <a class="button" href="https://dl.ninjarmm.com/agent/generic_installer.exe">Missouri</a>
  <a class="button" href="https://dl.ninjarmm.com/agent/oklahoma_installer.exe">Oklahoma</a>
  <a class="button" href="https://dl.ninjarmm.com/agent/texas_installer.exe">Texas</a>
  <a class="button" href="https://dl.ninjarmm.com/agent/generic_installer.exe">Remote</a>

  <p style="margin-top:40px;font-size:20px;color:#555;">
    Need help? Contact ODS IT Support at techsupport@onsitedealersolutions.com or by phone: 913-871-4220
  </p>
</body>
</html>
